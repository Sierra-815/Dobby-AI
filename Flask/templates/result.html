<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="shortcut icon"
          href="https://raw.githubusercontent.com/Soyeon-ErinLee/Dobby-AI/main/Flask/templates/logo2.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Petit+Formal+Script&family=Rouge+Script&display=swap"
          rel="stylesheet">
    <title>Save Your Minutes</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Bootstrap core CSS -->
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="../static/css/mdb.min.css" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="../static/css/style.min.css" rel="stylesheet">
    <style type="text/css">
        @media (min-width: 800px) and (max-width: 850px) {
            .navbar:not(.top-nav-collapse) {
                background: #1C2331 !important;
            }
        }

        .navbar-custom {
            background-color: #080a29;
        }

        .is-readonly .btn-save {
            display: none;
        }

        .form-group2 {
            display: none;
        }

        .sugans {
            display: none;
        }


        .is-readonly input[disabled], form.is-readonly textarea[disabled] {

            cursor: text;
            background-color: #fff;
            border-color: transparent;
            outline-color: transparent;
            box-shadow: none;
        }

        .is-editing .btn-edit .is-readonly .btn-save {
            display: none;
        }

        .anyClass {
            height: 150px;
            overflow-y: scroll;
        }

        .makebig {
            width: 540px;
            height: 700px;
        }

        .askai {
            color: darkblue;
        }

        .alas {
            word-wrap: break-word;
        }

        .is-readonly input[disabled], form.is-readonly textarea[disabled] {
            cursor: text;
            background-color: #fff;
            border-color: transparent;
            outline-color: transparent;
            box-shadow: none;
        }


        .is-editing .btn-edit {
            display: none;
        }

        #ai {
            display: none;
        }

        #iframe {
            display: none;
        }

        #myBtn {
            display: none; /* Hidden by default */
            position: fixed; /* Fixed/sticky position */
            bottom: 20px; /* Place the button at the bottom of the page */
            right: 30px; /* Place the button 30px from the right */
            z-index: 99; /* Make sure it does not overlap */
            border: none; /* Remove borders */
            outline: none; /* Remove outline */
            background-color: #080a29; /* Set a background color */
            color: white; /* Text color */
            cursor: pointer; /* Add a mouse pointer on hover */
            padding: 15px; /* Some padding */
            border-radius: 10px; /* Rounded corners */
            font-size: 18px; /* Increase font size */
        }

        #myBtn:hover {
            background-color: #555; /* Add a dark-grey background on hover */
        }

        .container-audio {
            width: 66%;
            height: auto;
            padding: 20px;
            border-radius: 5px;
            background-color: #eee;
            color: #444;
            margin: 20px auto;
            overflow: hidden;
        }

        .float {
            float: right;
            padding: 0;
            border: none;
            background: none;
        }

        .righta {
            width: 400px;
        }

        .subsub {
            float: right;
            background: white;
            color: #000;
        }

        audio {
            width: 100%;
            height: 15px;
        }

        audio:nth-child(2), audio:nth-child(4), audio:nth-child(6) {
            margin: 0;
        }

    </style>
</head>

<body>

<!-- Navbar -->
<nav class="navbar fixed-top navbar-expand-lg navbar-dark navbar-custom scrolling-navbar">
    <div class="container">

        <!-- Brand -->
        <a class="navbar-brand waves-effect" href="/">

            <img src="https://raw.githubusercontent.com/Soyeon-ErinLee/Dobby-AI/main/Flask/templates/logo1.png"
                 height="30" alt="logo">
        </a>

        <!-- Collapse -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Links -->
        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            <!-- Left -->
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Home
                        <span class="sr-only">(current)</span>
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/#tutorial">Tutorial</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/#upload">Upload File
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/#aboutus">About Us</a>
                </li>
            </ul>

            <!-- Right -->
            <ul class="navbar-nav nav-flex-icons">

                <li class="nav-item">
                    <a href="https://github.com/Soyeon-ErinLee/Dobby-AI" class="nav-link border border-light rounded"
                       target="_blank">
                        <i class="fab fa-github mr-2"></i>Visit Our GitHub
                    </a>
                </li>
            </ul>

        </div>

    </div>
</nav>
<!-- Navbar -->

<!--Main layout-->
<main class="mt-5 pt-3">
    <div class="container">

        <!--Section: Main info-->
        <section class="mt-5 wow fadeIn">
            <h3 class="h3 text-center mb-3"><strong>Edit and Save</strong></h3>
            <hr class="mb-3">
            <div class="container-audio mb-3">
                <audio controls loop>
                    <source src="{{url_for('static', filename = path)}}" type={{file_type}}>
                    Your browser dose not Support the audio Tag
                </audio>
            </div>
            <hr class="mb-3">
            <!--Grid row-->
            <div class="row">

                <!--Grid column-->
                <div class="col-md-6 mb-4">

                    <h5 class="font-weight-bold">Transcript</h5>
                    <hr class="mb-3">

                    <form class="is-readonly" role="form">
                        <div class="form-group">
                            <iframe id="iframe"></iframe>
                            <div type="text" class="form-control anyClass alas makebig is-disabled"
                                 id="edit" disabled>
                                <strong>Speaker 1 00:03 <br></strong>
                                When I was in college, it was my dream to be a lawyer. I needed
                                some money and Trevor convinced me to memorize this math test
                                and sell it. Turns out we sold it to the dean's daughter. I lost my
                                scholarship, I got kicked out of school, I got knocked into a
                                different life. And I have been wishing for a way back ever since. <br><br>
                                <strong>Speaker 2 00:51 <br></strong>
                                Let me tell you something. This isn't elementary school. This is hard
                                work. Long hours. High pressure. I need a grown goddamn man. <br><br>
                                <strong>Speaker 1 01:07 <br></strong>
                                You give me this, and I will work as hard as it takes to school those
                                Harvard douches and become the best lawyer you have ever seen. <br><br>
                                <strong>Speaker 2 01:21 <br></strong>
                                I'm inclined to give you a shot but what if I decide to go another
                                way? <br><br>
                                <strong>Speaker 1 01:37 <br></strong>
                                I'd say that's fair. <br><br>
                                <strong>Speaker 2 01:41 <br></strong>
                                Sometimes, I like to hang out with people who aren't that bright.
                                You know, just to see how the other half lives. Move over. I'm
                                emailing the firm we've just found our next associate. All right.<br><br>
                                <strong>Speaker 3 02:11 <br></strong>
                                Well I havenâ€™t been very productive with my task so please excuse me. What I did do
                                however is I searched up some already-available services for Ai automated transcription
                                services. There were two that I found to be somewhat relevant to what we were doing:
                                Otter.ai and Deeptalk. Fortunately both of them have yet developed ways to produce
                                meeting notes or minute so if we can get it done, we would be the first to do so. I will
                                get the interface design by today and the rest of the work including homepage feedback
                                by the next meeting on the 12th.
                            </div>
                        </div>

                        <button type="button" class="btn btn-edit js-edit" onclick="Editable()">Edit</button>
                        <button type="button" class="btn btn-save js-save" onclick="saveEdits()">Save</button>
                        <a type="button" class="btn" id="saveButton" target="iframe" download="note.txt" href="#"
                           onclick="save();">Download</a>
                    </form>

                </div>
                <!--Grid column-->

                <!--Grid column-->
                <div class="col-md-6 mb-4">
                    <h5 class="font-weight-bold">Minutes</h5>
                    <hr class="mb-3">
                    <!-- Main heading -->
                    <form class="is-readonly" role="form">
                        <div id="docx" class="form-group">
                            <div class="form-control anyClass alas makebig WordSection1" id="minute">
                                <table class="table table-bordered">
                                    <tr>
                                        <td><strong>Topic</strong></td>
                                        <td>KIC Project Progress Check</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Participants</strong></td>
                                        <td>Erin, Kim, Steven, Sierra, Koo, and Jeon.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Date</strong></td>
                                        <td>2021.02.14</td>
                                    </tr>
                                </table>
                                <label><strong>Agenda 1</strong></label>
                                <table class="table table-bordered">
                                    <tr>
                                        <td><strong>Presenter</strong></td>
                                        <td>Kim</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Discussion Topic</strong></td>
                                        <td>what API we should use.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Conclusion</strong></td>
                                        <td>Google and IBM works the best.</td>
                                    </tr>
                                </table>
                                <table class="table addel table-bordered" id="addel1">
                                    <tr>
                                        <td><strong>Action Item</strong></td>
                                        <td><strong>Person Responsible</strong></td>
                                        <td><strong>Deadline</strong></td>
                                    </tr>
                                    <tr>
                                        <td>evaluate Google Premium API,</td>
                                        <td>Kim</td>
                                        <td>today</td>
                                    </tr>
                                    <tr>
                                        <td>to confirm API and edit the code,</td>
                                        <td>Steven,</td>
                                        <td>by the next meeting on the 12th.</td>
                                    </tr>
                                    <input type="button" class="float" value="Add" id="addrow1"></table>
                                <table class="table table-bordered">
                                    <tr>
                                        <td><strong>Additional Notes</strong></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                    </tr>
                                </table>
                                <label><strong>Agenda 2</strong></label>
                                <table class="table table-bordered">
                                    <tr>
                                        <td><strong>Presenter</strong></td>
                                        <td>Steven,</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Discussion Topic</strong></td>
                                        <td>interface works,</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Conclusion</strong></td>
                                        <td>Google and IBM works the best.</td>
                                    </tr>
                                </table>
                                <table class="table addel table-bordered" id="addel2">
                                    <tr>
                                        <td><strong>Action Item</strong></td>
                                        <td><strong>Person Responsible</strong></td>
                                        <td><strong>Deadline</strong></td>
                                    </tr>
                                    <tr>
                                        <td>evaluate Google Premium API,</td>
                                        <td>Steven</td>
                                        <td>today.</td>
                                    </tr>
                                    <tr>
                                        <td>confirm API and edit the code,</td>
                                        <td>Steven</td>
                                        <td>by the next meeting.</td>
                                    </tr>
                                    <input type="button" class="float" value="Add" id="addrow2"></table>
                                <table class="table table-bordered">
                                    <tr>
                                        <td><strong>Additional Notes</strong></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                    </tr>
                                </table>

                                <br>
                                <input type="button" name="clone" class="btn btn-file clone"
                                       value="Add" onclick="toggler('form-group2');">
                                <div class="form-group2" id="form-group2">
                                    <div id="addagenda" class="addagenda">
                                        <br>
                                        <label><strong>New Agenda</strong></label>
                                        <table class="table table-bordered">
                                            <tr>
                                                <td><strong>Presenter</strong></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td><strong>Discussion Topic</strong></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td><strong>Conclusion</strong></td>
                                                <td></td>
                                            </tr>
                                        </table>
                                        <table class="table table-bordered addel" id="addel">

                                            <tr>
                                                <td><strong>Action Items</strong></td>
                                                <td><strong>Person Responsible</strong></td>
                                                <td><strong>Deadline</strong></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <input type="button" class="float" value="Add" id="addrow">
                                        </table>
                                        <table class="table table-bordered">
                                            <tr>
                                                <td><strong>Additional Notes</strong></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                            </tr>
                                        </table>
                                    </div>
                                    <input type="button" name="clone" class="btn btn-file clone"
                                           value="Add">
                                    <input type="button" name="remove" class="btn btn-file remove"
                                           value="Remove">
                                </div>
                            </div>
                        </div>

                        <button type="button" class="btn btn-edit js-edit" onclick="Editable2()">Edit</button>
                        <button type="button" class="btn btn-save js-save" onclick="saveEdits2()">Save</button>
                        <button type="button" class="btn" id="export">Download</button>

                        <button type="button" class="btn askai" id=askai onclick="toggler('ai');">Ask AI</button>
                        <br><br>
                        <div class="ai" id="ai">
                            <input type="text" class="righta">
                            <input type="button" value="submit" class="btn btn-sm subsub rounded"
                                   onclick="toggler('sugans')">
                            <br><br>
                            <div id="sugans" class="sugans">Suggested Answer</div>
                        </div>
                    </form>
                </div>
                <!--Grid column-->

            </div>
            <!--Grid row-->

        </section>
        <!--Section: Main info-->


        <hr class="mb-5">


    </div>
</main>
<!--Main layout-->
<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
<!--Footer-->
<footer class="page-footer text-center font-small mt-4 wow fadeIn">

    <!--Call to action-->
    <div class="pt-4">
        <a class="btn btn-outline-white" href="/#upload" target="_blank"
           role="button">Convert Another File
        </a>
    </div>
    <!--/.Call to action-->

    <hr class="my-4">

    <!-- Social icons -->
    <div class="pb-4">

        <a href="https://github.com/Soyeon-ErinLee/Dobby-AI" target="_blank">
            <i class="fab fa-github mr-3"></i>
        </a>

    </div>
    <!-- Social icons -->

    <!--Copyright-->
    <div class="footer-copyright py-3">
        Â© 2021 Copyright
        <a>Dobby AI</a>
    </div>
    <!--/.Copyright-->

</footer>
<!--/.Footer-->

<!-- SCRIPTS -->
<!-- JQuery -->
<script type="text/javascript" src="../static/js/jquery-3.4.1.min.js"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="../static/js/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="../static/js/bootstrap.min.js"></script>
<!-- MDB core JavaScript -->
<script type="text/javascript" src="../static/js/mdb.min.js"></script>
<!-- Initializations -->
<script type="text/javascript">
    // Animations initialization
    new WOW().init();
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
    document.querySelectorAll('.form-outline').forEach((formOutline) => {
        new mdb.Input(formOutline).update();
    });</script>

<script>
    //Get the button
    var mybutton = document.getElementById("myBtn");

    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function () {
        scrollFunction()
    };

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            mybutton.style.display = "block";
        } else {
            mybutton.style.display = "none";
        }
    }

    // When the user clicks on the button, scroll to the top of the document
    function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }

    function save() {
        var note = document.getElementById('edit').innerHTML;
        note = note.replace(/(<div><br>)*<\/div>/g, '\n');
        note = note.replace(/<br>*<\/strong>/g, '');
        note = note.replace(/<div>/g, '');
        note = note.replace(/<strong>/g, '');
        note = note.replace(/<br>/g, '');
        /* replaces some html entities */
        note = note.replace(/&nbsp;/g, ' ');
        note = note.replace(/&amp;/g, '&');
        note = note.replace(/&lt;/g, '<');
        note = note.replace(/&gt;/g, '>');
        document.getElementById('saveButton').setAttribute(
            'href',
            'data:Content-type: text/plain, ' + escape(note)
        );
    }

    function Editable() {
        var editElem = document.getElementById("edit");
        editElem.contentEditable = "true";
    }

    function Editable2() {
        var editElem = document.getElementById("minute");
        editElem.contentEditable = "true";
    }

    function saveEdits() {
        var editElem = document.getElementById("edit");
        editElem.contentEditable = "false";
        //get the edited element content
        var userVersion = editElem.innerHTML;
        //save the content to local storage
        localStorage.userEdits = userVersion;
    }

    function saveEdits2() {
        var editElem = document.getElementById("minute");
        editElem.contentEditable = "false";
        //get the edited element content
        var userVersion = editElem.innerHTML;
        //save the content to local storage
        localStorage.userEdits = userVersion;
    }

    $(document).ready(function () {
        var tbody = $('#addel').children('tbody');
        var table = tbody.length ? tbody : $('#addel');
        $('#addrow').click(function () {
            table.append('<tr><td></td><td></td><td></td></tr>');
        })
    });

    $(document).ready(function () {
        $('.js-edit, .js-save').on('click', function () {
            var $form = $(this).closest('form');
            $form.toggleClass('is-readonly is-editing');
            var isReadonly = $form.hasClass('is-readonly');
            $form.find('input,textarea').prop('disabled', isReadonly);
        });
    });

    window.export.onclick = function () {

        if (!window.Blob) {
            alert('Your legacy browser does not support this action.');
            return;
        }

        var html, link, blob, url, css;

        // EU A4 use: size: 841.95pt 595.35pt;
        // US Letter use: size:11.0in 8.5in;

        css = (
            '<style>' +
            '@page WordSection1{size: 841.95pt 595.35pt;mso-page-orientation: landscape;}' +
            'div.WordSection1 {page: WordSection1;}' +
            'table{border-collapse:collapse;}td{border:1px gray solid;width:50em;padding:2px;}' +
            '</style>'
        );

        html = window.docx.innerHTML;
        blob = new Blob(['\ufeff', css + html], {
            type: 'application/msword'
        });
        url = URL.createObjectURL(blob);
        link = document.createElement('A');
        link.href = url;
        // Set default file name.
        // Word will append file extension - do not add an extension here.
        link.download = 'Document';
        document.body.appendChild(link);
        if (navigator.msSaveOrOpenBlob) navigator.msSaveOrOpenBlob(blob, 'Document.doc'); // IE10-11
        else link.click();  // other browsers
        document.body.removeChild(link);
    };

    var regex = /^(.+?)(\d+)$/i;
    var cloneIndex = $(".form-group2").length;

    function clone() {
        var elem = $(this).parents(".form-group2");
        elem.clone()
            .insertAfter(elem)
            .attr("id", "form-group2" + cloneIndex)
            .find("*")
            .each(function () {
                var id = this.id || "";
                var match = id.match(regex) || [];
                if (match.length === 3) {
                    this.id = match[1] + (cloneIndex);
                }
            })
            .on('click', 'button.clone', clone)
            .on('click', 'button.remove', remove);
        cloneIndex++;
    }

    function remove() {
        $(this).parents(".form-group2").remove();
    }

    $(document).on("click", "input.clone", clone);
    $(document).on("click", "input.remove", remove);

    function toggler(divId) {
        $("#" + divId).toggle();
    }

</script>
<script>   $(document).ready(function () {
    var tbody = $("#addel1").children("tbody");
    var table = tbody.length ? tbody : $("#addel1");
    $("#addrow1").click(function () {
        table.append("<tr><td></td><td></td><td></td></tr>");
    })
});</script>
<script>   $(document).ready(function () {
    var tbody = $("#addel2").children("tbody");
    var table = tbody.length ? tbody : $("#addel2");
    $("#addrow2").click(function () {
        table.append("<tr><td></td><td></td><td></td></tr>");
    })
});</script>
</body>
</html>
<!--document.forms["txt"].submit();-->